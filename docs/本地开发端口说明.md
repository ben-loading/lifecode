# 本地开发端口说明

## 端口配置

- **3004端口**：主应用（lifecode）
- **3005端口**：后台管理系统验证

## 启动方式

### 主应用（3004端口）

```bash
# 启动主应用
npm run dev:3004
```

访问地址：
- 主应用：http://localhost:3004
- 后台管理：http://localhost:3004/admin/redemption-codes

### 后台管理系统（3005端口）

```bash
# 启动后台管理系统
npm run dev:3005
```

访问地址：
- 后台管理：http://localhost:3005/admin/redemption-codes

## 注意事项

1. **管理员权限**：确保 `.env.local` 中配置了 `ADMIN_EMAILS`，并使用管理员邮箱登录
2. **数据库迁移**：首次使用前需要执行 `migrations/add_redemption_code_fields.sql`
3. **端口冲突**：如果端口被占用，可以修改 `package.json` 中的端口号

## 环境变量配置

在 `.env.local` 中配置：

```bash
# 管理员邮箱（多个用逗号分隔）
ADMIN_EMAILS=your-admin@email.com,another-admin@email.com

# Supabase 配置
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

## 快速测试流程

### 主应用测试
1. 启动主应用：`npm run dev:3004`
2. 访问：http://localhost:3004
3. 使用管理员邮箱登录
4. 访问后台：http://localhost:3004/admin/redemption-codes

### 后台管理系统独立测试
1. 启动后台：`npm run dev:3005`
2. 访问：http://localhost:3005/admin/redemption-codes
3. 使用管理员邮箱登录
4. 测试功能：
   - 生成兑换码
   - 查看列表
   - 复制兑换码
   - 删除未使用的兑换码
